/* Import Academic Fonts */
@import url("https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Academic Textbook/Notes/Papers Theme - Light Mode (OKLCH) */
    /* Inspired by: Paper, ink, highlighters, and scholarly materials */

    /* Border Radius - Minimal, paper-like corners */
    --radius: 0.125rem; /* 2px - very subtle, almost sharp */

    /* Base Colors - Warm paper and deep ink */
    --background: oklch(0.98 0.005 85); /* Warm off-white, like aged paper */
    --foreground: oklch(0.15 0.01 265); /* Deep ink black */

    /* Card Colors - Slightly elevated paper */
    --card: oklch(0.99 0.003 85); /* Bright paper white */
    --card-foreground: oklch(0.15 0.01 265); /* Deep ink black */

    /* Popover Colors */
    --popover: oklch(0.99 0.003 85); /* Bright paper white */
    --popover-foreground: oklch(0.15 0.01 265); /* Deep ink black */

    /* Primary - Academic blue (like blue ink) */
    --primary: oklch(0.35 0.08 250); /* Deep academic blue */
    --primary-foreground: oklch(0.99 0.003 85); /* Paper white */

    /* Secondary - Subtle gray (like pencil marks) */
    --secondary: oklch(0.92 0.005 265); /* Light graphite */
    --secondary-foreground: oklch(0.2 0.01 265); /* Dark gray */

    /* Muted - Light cream (like notebook margins) */
    --muted: oklch(0.95 0.008 85); /* Cream/beige */
    --muted-foreground: oklch(0.45 0.02 265); /* Medium gray */

    /* Accent - Highlighter yellow */
    --accent: oklch(0.85 0.12 95); /* Soft yellow highlighter */
    --accent-foreground: oklch(0.2 0.01 265); /* Dark text on highlight */

    /* Destructive - Red ink */
    --destructive: oklch(0.5 0.2 25); /* Red correction pen */
    --destructive-foreground: oklch(0.99 0.003 85); /* Paper white */

    /* Success - Green checkmark */
    --success: oklch(0.55 0.15 150); /* Academic green */
    --success-foreground: oklch(0.99 0.003 85); /* Paper white */

    /* Warning - Orange highlighter */
    --warning: oklch(0.75 0.15 75); /* Warm orange */
    --warning-foreground: oklch(0.2 0.01 265); /* Dark text */

    /* Info - Blue note */
    --info: oklch(0.55 0.12 240); /* Information blue */
    --info-foreground: oklch(0.99 0.003 85); /* Paper white */

    /* Borders & Inputs - Subtle graphite */
    --border: oklch(0.85 0.005 265); /* Light graphite line */
    --input: oklch(0.85 0.005 265); /* Light graphite line */
    --ring: oklch(0.35 0.08 250); /* Primary blue for focus */

    /* Sidebar - Margin area */
    --sidebar: oklch(0.96 0.008 85); /* Slightly darker than background */
    --sidebar-foreground: oklch(0.15 0.01 265); /* Deep ink black */
    --sidebar-primary: oklch(0.35 0.08 250); /* Academic blue */
    --sidebar-primary-foreground: oklch(0.99 0.003 85); /* Paper white */
    --sidebar-accent: oklch(0.92 0.005 265); /* Light graphite */
    --sidebar-accent-foreground: oklch(0.2 0.01 265); /* Dark gray */
    --sidebar-border: oklch(0.85 0.005 265); /* Light graphite line */
    --sidebar-ring: oklch(0.35 0.08 250); /* Primary blue */

    /* Chart Colors - Academic palette */
    --chart-1: oklch(0.35 0.08 250); /* Academic blue */
    --chart-2: oklch(0.55 0.15 150); /* Academic green */
    --chart-3: oklch(0.5 0.2 25); /* Academic red */
    --chart-4: oklch(0.75 0.15 75); /* Warm orange */
    --chart-5: oklch(0.45 0.12 280); /* Purple */
  }

  .dark {
    /* Academic Textbook/Notes/Papers Theme - Dark Mode (OKLCH) */
    /* Inspired by: Chalkboard, night reading, reduced eye strain */

    /* Base Colors - Deep charcoal and soft white */
    --background: oklch(0.18 0.01 265); /* Deep charcoal */
    --foreground: oklch(0.95 0.005 85); /* Soft white (reduced eye strain) */

    /* Card Colors - Slightly elevated surface */
    --card: oklch(0.22 0.01 265); /* Lighter charcoal */
    --card-foreground: oklch(0.95 0.005 85); /* Soft white */

    /* Popover Colors */
    --popover: oklch(0.22 0.01 265); /* Lighter charcoal */
    --popover-foreground: oklch(0.95 0.005 85); /* Soft white */

    /* Primary - Chalk blue */
    --primary: oklch(0.65 0.08 250); /* Bright chalk blue */
    --primary-foreground: oklch(0.18 0.01 265); /* Deep charcoal */

    /* Secondary - Medium gray */
    --secondary: oklch(0.3 0.01 265); /* Dark gray */
    --secondary-foreground: oklch(0.9 0.005 85); /* Light gray */

    /* Muted - Darker gray */
    --muted: oklch(0.28 0.01 265); /* Muted dark gray */
    --muted-foreground: oklch(0.65 0.02 265); /* Medium light gray */

    /* Accent - Soft amber (warm reading light) */
    --accent: oklch(0.75 0.1 75); /* Warm amber */
    --accent-foreground: oklch(0.18 0.01 265); /* Deep charcoal */

    /* Destructive - Soft red */
    --destructive: oklch(0.6 0.18 25); /* Muted red */
    --destructive-foreground: oklch(0.95 0.005 85); /* Soft white */

    /* Success - Soft green */
    --success: oklch(0.65 0.12 150); /* Muted green */
    --success-foreground: oklch(0.18 0.01 265); /* Deep charcoal */

    /* Warning - Soft orange */
    --warning: oklch(0.7 0.12 75); /* Muted orange */
    --warning-foreground: oklch(0.18 0.01 265); /* Deep charcoal */

    /* Info - Soft blue */
    --info: oklch(0.6 0.1 240); /* Muted blue */
    --info-foreground: oklch(0.95 0.005 85); /* Soft white */

    /* Borders & Inputs - Subtle gray */
    --border: oklch(0.3 0.01 265); /* Subtle gray line */
    --input: oklch(0.3 0.01 265); /* Subtle gray line */
    --ring: oklch(0.65 0.08 250); /* Chalk blue for focus */

    /* Sidebar - Slightly darker area */
    --sidebar: oklch(0.2 0.01 265); /* Darker charcoal */
    --sidebar-foreground: oklch(0.95 0.005 85); /* Soft white */
    --sidebar-primary: oklch(0.65 0.08 250); /* Chalk blue */
    --sidebar-primary-foreground: oklch(0.18 0.01 265); /* Deep charcoal */
    --sidebar-accent: oklch(0.3 0.01 265); /* Dark gray */
    --sidebar-accent-foreground: oklch(0.9 0.005 85); /* Light gray */
    --sidebar-border: oklch(0.3 0.01 265); /* Subtle gray line */
    --sidebar-ring: oklch(0.65 0.08 250); /* Chalk blue */

    /* Chart Colors - Muted academic palette */
    --chart-1: oklch(0.65 0.08 250); /* Chalk blue */
    --chart-2: oklch(0.65 0.12 150); /* Muted green */
    --chart-3: oklch(0.6 0.18 25); /* Muted red */
    --chart-4: oklch(0.7 0.12 75); /* Muted orange */
    --chart-5: oklch(0.6 0.1 280); /* Muted purple */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family:
      "Inter",
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
    line-height: 1.7; /* Academic line-height for readability */
    letter-spacing: 0.01em; /* Subtle letter-spacing */
  }

  /*
   * SPACING SCALE - Professional Design System
   * Base unit: 4px (0.25rem)
   *
   * Scale:
   * 1  = 4px   (0.25rem) - Minimal gaps, tight spacing
   * 2  = 8px   (0.5rem)  - Compact element spacing
   * 3  = 12px  (0.75rem) - Standard element spacing
   * 4  = 16px  (1rem)    - Comfortable spacing, default component padding
   * 5  = 20px  (1.25rem) - Relaxed spacing
   * 6  = 24px  (1.5rem)  - Section spacing
   * 8  = 32px  (2rem)    - Large section spacing
   * 12 = 48px  (3rem)    - Major section breaks
   * 16 = 64px  (4rem)    - Page-level spacing
   *
   * Guidelines:
   * - Use spacing primarily at LAYOUT level (containers, sections)
   * - Keep component internal padding minimal (p-3 to p-4)
   * - Vary spacing based on visual hierarchy
   * - Maintain adequate touch targets (44x44px minimum)
   */

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Focus visible for accessibility - academic style */
  *:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-1 ring-offset-background;
  }

  /* Typography - Academic hierarchy */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "Crimson Pro", "Crimson Text", Georgia, serif;
    @apply font-semibold;
    letter-spacing: -0.02em; /* Tighter for headings */
    line-height: 1.3; /* Tighter line-height for headings */
  }

  h1 {
    @apply text-4xl md:text-5xl;
  }

  h2 {
    @apply text-3xl md:text-4xl;
  }

  h3 {
    @apply text-2xl md:text-3xl;
  }

  h4 {
    @apply text-xl md:text-2xl;
  }

  h5 {
    @apply text-lg md:text-xl;
  }

  h6 {
    @apply text-base md:text-lg;
  }

  /* Code and numbers - monospace */
  code,
  kbd,
  samp,
  pre {
    font-family: "JetBrains Mono", "Fira Code", "Consolas", monospace;
  }

  /* Tabular numbers for consistent width */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Academic paragraph spacing */
  p {
    margin-bottom: 1em;
  }

  p:last-child {
    margin-bottom: 0;
  }
}

@layer utilities {
  /* Academic Paper Utilities - Minimal, purposeful styling */

  /* Paper-like card - flat with subtle border */
  .paper-card {
    @apply bg-card border border-border shadow-sm;
  }

  /* Ruled line separator - like notebook paper */
  .ruled-line {
    @apply border-b border-border;
  }

  /* Margin note style - like textbook margins */
  .margin-note {
    @apply text-sm text-muted-foreground italic;
  }

  /* Underline link - academic hyperlink style */
  .link-underline {
    @apply underline decoration-1 underline-offset-2 hover:decoration-2 transition-all duration-150;
  }

  /* Academic content width - optimal readability */
  .content-width {
    max-width: 65ch; /* Academic standard for readability */
  }

  /* Minimal animations - only for functional feedback */
  .animate-in {
    animation: animate-in 0.2s ease-out;
  }

  @keyframes animate-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Fade in - subtle entrance */
  .fade-in {
    animation: fade-in 0.2s ease-out;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Smooth transitions - minimal duration */
  .transition-smooth {
    @apply transition-all duration-150 ease-in-out;
  }

  /* Hover underline - for interactive text */
  .hover-underline {
    @apply hover:underline hover:decoration-1 hover:underline-offset-2 transition-all duration-150;
  }

  /* Focus ring - academic style */
  .focus-academic {
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1;
  }

  /* Text selection - highlighter effect */
  ::selection {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }

  ::-moz-selection {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .animate-in,
    .fade-in {
      animation: none !important;
      transition: none !important;
    }
  }

  /* ========================================================================
     ACADEMIC VISUAL ENHANCEMENTS
     ======================================================================== */

  /* Paper Texture Overlay */
  .paper-texture {
    position: relative;
  }

  .paper-texture::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    opacity: 0.5;
    pointer-events: none;
    border-radius: inherit;
  }

  .dark .paper-texture::before {
    opacity: 0.3; /* Lighter texture in dark mode */
  }

  /* Folded Corner Effect */
  .folded-corner {
    position: relative;
  }

  .folded-corner::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 0 16px 16px 0;
    border-color: transparent oklch(0.85 0.005 265) transparent transparent;
    filter: drop-shadow(-1px 1px 1px rgba(0, 0, 0, 0.1));
  }

  .dark .folded-corner::after {
    border-color: transparent oklch(0.3 0.01 265) transparent transparent;
  }

  .folded-corner-sm::after {
    border-width: 0 12px 12px 0;
  }

  .folded-corner-lg::after {
    border-width: 0 20px 20px 0;
  }

  /* Ruled Lines (Notebook Paper) */
  .ruled-lines {
    background-image: repeating-linear-gradient(
      transparent,
      transparent 1.5rem,
      var(--border) 1.5rem,
      var(--border) calc(1.5rem + 1px)
    );
  }

  .ruled-lines-tight {
    background-image: repeating-linear-gradient(
      transparent,
      transparent 1.25rem,
      var(--border) 1.25rem,
      var(--border) calc(1.25rem + 1px)
    );
  }

  /* Ruled lines with margin (like composition notebook) */
  .ruled-lines-margin {
    background-image:
      repeating-linear-gradient(
        transparent,
        transparent 1.5rem,
        var(--border) 1.5rem,
        var(--border) calc(1.5rem + 1px)
      ),
      linear-gradient(
        to right,
        transparent 2.5rem,
        oklch(68.69% 0.15391 13.513) 2.5rem,
        oklch(68.69% 0.15391 13.513) calc(2.5rem + 2px),
        transparent calc(2.5rem + 2px),
        transparent 1.25rem,
        oklch(68.69% 0.15391 13.513) 2.75rem,
        oklch(68.69% 0.15391 13.513) calc(2.75rem + 2px),
        transparent calc(2.75rem + 2px)
      );
  }

  .dark .ruled-lines-margin {
    background-image:
      repeating-linear-gradient(
        transparent,
        transparent 1.5rem,
        var(--border) 1.5rem,
        var(--border) calc(1.5rem + 1px)
      ),
      linear-gradient(
        to right,
        transparent 2.5rem,
        oklch(85.93% 0.00662 16.474) 2.5rem,
        oklch(80.139% 0.01705 17.222) calc(2.5rem + 2px),
        transparent calc(2.5rem + 2px),
        transparent 2.75rem,
        oklch(76.665% 0.01726 17.259) 2.75rem,
        oklch(80.852% 0.01816 17.257) calc(2.75rem + 2px),
        transparent calc(2.75rem + 2px)
      );
  }

  /* Ink Underline Effect */
  .ink-underline {
    position: relative;
    display: inline-block;
  }

  .ink-underline::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 100%;
    height: 2px;
    background: var(--primary);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease-out;
  }

  .ink-underline:hover::after,
  .ink-underline.active::after {
    transform: scaleX(1);
  }

  /* Ink underline - always visible variant */
  .ink-underline-visible::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 100%;
    height: 2px;
    background: var(--primary);
  }

  /* Highlighter Scribble Effect */
  .highlight-scribble {
    position: relative;
    display: inline-block;
  }

  .highlight-scribble::after {
    content: "";
    position: absolute;
    left: -2px;
    right: -2px;
    bottom: -2px;
    height: 12px;
    background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M 0 8 Q 2 6, 4 7 T 8 8 T 12 7 T 16 8 T 20 7 T 24 8 T 28 7 T 32 8 T 36 7 T 40 8 T 44 7 T 48 8 T 52 7 T 56 8 T 60 7 T 64 8 T 68 7 T 72 8 T 76 7 T 80 8 T 84 7 T 88 8 T 92 7 T 96 8 T 100 7' stroke='%23fbbf24' stroke-width='3' fill='none' opacity='0.4' stroke-linecap='round'/%3E%3C/svg%3E");
    background-size: 100% 100%;
    background-repeat: repeat-x;
    z-index: -1;
    pointer-events: none;
  }

  .highlight-scribble-green::after {
    background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M 0 8 Q 2 6, 4 7 T 8 8 T 12 7 T 16 8 T 20 7 T 24 8 T 28 7 T 32 8 T 36 7 T 40 8 T 44 7 T 48 8 T 52 7 T 56 8 T 60 7 T 64 8 T 68 7 T 72 8 T 76 7 T 80 8 T 84 7 T 88 8 T 92 7 T 96 8 T 100 7' stroke='%2322c55e' stroke-width='3' fill='none' opacity='0.3' stroke-linecap='round'/%3E%3C/svg%3E");
  }

  .highlight-scribble-orange::after {
    background-image: url("data:image/svg+xml,%3Csvg width='100%25' height='12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M 0 8 Q 2 6, 4 7 T 8 8 T 12 7 T 16 8 T 20 7 T 24 8 T 28 7 T 32 8 T 36 7 T 40 8 T 44 7 T 48 8 T 52 7 T 56 8 T 60 7 T 64 8 T 68 7 T 72 8 T 76 7 T 80 8 T 84 7 T 88 8 T 92 7 T 96 8 T 100 7' stroke='%23f97316' stroke-width='3' fill='none' opacity='0.4' stroke-linecap='round'/%3E%3C/svg%3E");
  }

  /* Sticky Note Callout */
  .sticky-note {
    @apply relative p-4 shadow-md;
    background: oklch(0.92 0.08 95); /* Yellow */
    transform: rotate(-0.5deg);
    transition: transform 0.2s ease-out;
  }

  .sticky-note:hover {
    transform: rotate(0deg) translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .sticky-note-pink {
    background: oklch(0.9 0.08 15); /* Pink */
  }

  .sticky-note-blue {
    background: oklch(0.88 0.06 240); /* Blue */
  }

  .sticky-note-green {
    background: oklch(0.9 0.08 150); /* Green */
  }

  .dark .sticky-note {
    background: oklch(0.35 0.06 95);
    color: oklch(0.95 0.005 85);
  }

  .dark .sticky-note-pink {
    background: oklch(0.35 0.06 15);
  }

  .dark .sticky-note-blue {
    background: oklch(0.35 0.06 240);
  }

  .dark .sticky-note-green {
    background: oklch(0.35 0.06 150);
  }

  /* Pencil Sketch Border */
  .sketch-border {
    position: relative;
    border: 2px solid var(--border);
    border-radius: 0.125rem;
  }

  .sketch-border::before {
    content: "";
    position: absolute;
    inset: -2px;
    border: 2px dashed var(--border);
    border-radius: 0.125rem;
    opacity: 0.3;
  }

  /* Page Curl Effect */
  .page-curl {
    transition:
      transform 0.2s ease-out,
      box-shadow 0.2s ease-out;
  }

  .page-curl:hover {
    transform: perspective(1000px) rotateY(2deg);
    box-shadow: -2px 2px 8px rgba(0, 0, 0, 0.1);
  }

  .dark .page-curl:hover {
    box-shadow: -2px 2px 8px rgba(0, 0, 0, 0.3);
  }

  @media (prefers-reduced-motion: reduce) {
    .page-curl:hover {
      transform: none;
    }
  }

  /* Bookmark Ribbon */
  .bookmark-ribbon {
    position: relative;
  }

  .bookmark-ribbon::before {
    content: "";
    position: absolute;
    top: 0;
    right: 1rem;
    width: 2rem;
    height: 3rem;
    background: var(--primary);
    clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  /* Bookmark ribbon variants */
  .bookmark-ribbon-accent::before {
    background: var(--accent);
  }

  .bookmark-ribbon-success::before {
    background: var(--success);
  }

  .bookmark-ribbon-destructive::before {
    background: var(--destructive);
  }

  /* Torn Paper Edge Effect */
  .torn-edge-top {
    position: relative;
  }

  .torn-edge-top::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 8px;
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='8' viewBox='0 0 100 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 4 Q 5 0, 10 4 T 20 4 T 30 4 T 40 4 T 50 4 T 60 4 T 70 4 T 80 4 T 90 4 T 100 4 L 100 8 L 0 8 Z' fill='%23ffffff'/%3E%3C/svg%3E");
    background-size: 100px 8px;
    background-repeat: repeat-x;
  }

  .dark .torn-edge-top::before {
    background-image: url("data:image/svg+xml,%3Csvg width='100' height='8' viewBox='0 0 100 8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 4 Q 5 0, 10 4 T 20 4 T 30 4 T 40 4 T 50 4 T 60 4 T 70 4 T 80 4 T 90 4 T 100 4 L 100 8 L 0 8 Z' fill='%232e2e2e'/%3E%3C/svg%3E");
  }

  /* Academic Focus Ring */
  .focus-ring-academic {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-1;
  }

  /* Handwritten Annotation Style */
  .annotation {
    @apply text-sm italic text-muted-foreground;
    font-family: "Crimson Pro", Georgia, serif;
    transform: rotate(-1deg);
  }

  /* Coffee Stain Ring (decorative accent) */
  .coffee-stain {
    position: relative;
  }

  .coffee-stain::after {
    content: "";
    position: absolute;
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    border: 2px solid oklch(0.6 0.08 75);
    opacity: 0.15;
    pointer-events: none;
  }

  .coffee-stain-top-right::after {
    top: 0.5rem;
    right: 0.5rem;
  }

  .coffee-stain-bottom-left::after {
    bottom: 0.5rem;
    left: 0.5rem;
  }

  .dark .coffee-stain::after {
    border-color: oklch(0.5 0.08 75);
    opacity: 0.1;
  }
}
